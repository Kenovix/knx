{% extends "::admin_layout.html.twig" %}

{% block menu %}
	{{ knp_menu_render('ParametrizarBundle:Builder:superAdminMenu') }}
{% endblock %}

{% block rastro %}{{ wo_render_breadcrumbs() }}{% endblock %}

{% block titulo %}Información del cliente{% endblock %}

{% block msg %}
	{% if app.session.flash('ok') %}
	    <div class="alert alert-success">
	    	<button data-dismiss="alert" class="close" type="button">×</button>
	        <span>{{ app.session.flash('ok') }}</span>
	    </div>
	{% elseif app.session.flash('info') %}
		<div class="alert alert-info">
	    	<button data-dismiss="alert" class="close" type="button">×</button>
	        <span>{{ app.session.flash('info') }}</span>
	    </div>
	{% elseif app.session.flash('error') %}
		<div class="alert alert-error">
	    	<button data-dismiss="alert" class="close" type="button">×</button>
	        <span>{{ app.session.flash('error') }}</span>
	    </div>
	{% endif %}
{% endblock %}

{% block cuerpo %}
	
	{% set label_tipo = {'1': 'Contributivo', '2': 'Subsidiado', '3': 'Vinculado', '4': 'Particular', '5': 'Otro'} %}

	<table class="table">
        <tbody>
        	<tr>
                <td><strong>Nit.</strong></td>
                <td>{{ cliente.nit }}</td>
                <td><strong>Nombre</strong></td>
                <td>{{ cliente.nombre }}</td>
            </tr>
            <tr>
                <td><strong>Código</strong></td>
                <td>{{ cliente.codigo }}</td>
                <td><strong>Tipo</strong></td>
                <td>{{ label_tipo[cliente.tipo] }}</td>
            </tr>
            
            <tr>
                <td><strong>Dirección</strong></td>
                <td>{{ cliente.direccion }}</td>
                <td><strong>Teléfono</strong></td>
                <td>{{ cliente.telefono }}</td>
            </tr>
            <tr>
                <td><strong>Estado</strong></td>
                <td>{{ cliente.estado }}</td>
                <td></td>
                <td></td>
            </tr>    
        </tbody>
    </table>

	<div class="btn-group">
	    <a href="{{ path('cliente_edit', {'cliente':cliente.id}) }}" class="btn btn-primary">Modificar</a>
	    <a href="{{ path('cliente_list') }}" class="btn">Volver</a>
    </div>
    
    <hr />
    
    <h3>Contratos</h3>
    
    {% if contratos %}
    
		<table class="table table-hover">
			<tr>
	    		<th>Número</th>
	    		<th>Inicia</th>
	    		<th>Finaliza</th>
	    		<th>Contacto</th>
	    		<th>Procentaje</th>
	    		<th>Estado</th>
	  		</tr>
    
    	{% for contrato in contratos %}    
    		<tr>
	    		<td><a href="{{ path('contrato_edit', {'contrato': contrato.id}) }}">{{ contrato.numero }}</a></td>
	    		<td>{{ contrato.fechaInicio | date('d-m-Y')}}</td>
	    		<td>{{ contrato.fechaFin | date('d-m-Y') }}</td>
	    		<td>{{ contrato.contacto }}</td>
	    		<td>{{ contrato.porcentaje }}</td>
	    		<td>{{ contrato.estado }}</td>
	  		</tr>
		{% endfor %}
		
		</table>
	{% else %}
		<span>No hay contratos</span>
	{% endif %}
	
	<a href="{{ path('contrato_new', {'cliente': cliente.id}) }}" class="btn btn-primary">Crear contrato</a>

{% endblock %}
